{"version":3,"file":"avatar-view.esm.js","sources":["../src/utils/useEyeBlink.ts","../src/utils/utils.ts","../src/utils/useHeadMovement.ts","../src/components/avatar.tsx","../src/components/loader.tsx","../src/index.tsx"],"sourcesContent":["import { Nodes } from './utils';\nimport { useEffect } from 'react';\nimport { useFrame } from '@react-three/fiber';\nimport { MeshStandardMaterial, SkinnedMesh } from 'three';\n\nlet blinkTime: number = 999;\nlet timeout: NodeJS.Timeout;\n\nlet headMesh: SkinnedMesh;\nlet morphIndex: number = 0;\n\nconst setNextBlink = () => {\n  blinkTime = 0;\n  timeout = setTimeout(setNextBlink, Math.random() * 5000 + 2000);\n};\n\nexport default function useEyeBlink(\n  enabled: boolean | undefined,\n  nodes: Nodes\n) {\n  useEffect(() => {\n    if (!enabled) return;\n\n    headMesh = (nodes.Wolf3D_Head || nodes.Wolf3D_Avatar) as SkinnedMesh;\n\n    const material = headMesh.material as MeshStandardMaterial;\n    material.morphTargets = true;\n\n    if (headMesh.morphTargetDictionary && headMesh.morphTargetInfluences) {\n      morphIndex = headMesh.morphTargetDictionary.eyesClosed;\n    }\n\n    timeout = setTimeout(setNextBlink, 1000);\n\n    return () => {\n      clearTimeout(timeout);\n    };\n  }, [nodes, enabled]);\n\n  useFrame((_, delta) => {\n    if (!enabled) return;\n\n    if (blinkTime < 2 && headMesh.morphTargetInfluences) {\n      let value = Math.abs(Math.sin((blinkTime * Math.PI) / 2));\n      blinkTime += delta * 10;\n      headMesh.morphTargetInfluences[morphIndex] = value;\n    } else if (headMesh.morphTargetInfluences) {\n      headMesh.morphTargetInfluences[morphIndex] = 0;\n    }\n  });\n}\n","import { LinearFilter, Material, Object3D } from 'three';\n\nexport interface Nodes {\n  [name: string]: Object3D;\n}\n\nexport interface Materials {\n  [name: string]: Material;\n}\n\nexport const clamp = (value: number, min: number, max: number) => {\n  return Math.min(Math.max(value, min), max);\n};\n\nexport const lerp = (start: number, end: number, time: number = 0.05) => {\n  return start * (1 - time) + end * time;\n};\n\nexport const mapRange = (\n  value: number,\n  inMin: number,\n  inMax: number,\n  outMin: number,\n  outMax: number\n) => {\n  value = clamp(value, inMin, inMax);\n  return ((value - inMin) * (outMax - outMin)) / (inMax - inMin) + outMin;\n};\n\nexport const hideHands = (nodes: Nodes) => {\n  if (nodes.Wolf3D_Hands) {\n    nodes.Wolf3D_Hands.visible = false;\n  }\n\n  if (nodes.RightHand && nodes.LeftHand) {\n    nodes.RightHand.position.set(0, -2, 0);\n    nodes.LeftHand.position.set(0, -2, 0);\n  }\n};\n\nexport const correctMaterials = (materials: Materials) => {\n  Object.values(materials).forEach((material: any) => {\n    // applying LinearFilter to texture to avoid  pixellization\n    if (material.map) material.map.minFilter = LinearFilter;\n\n    // support transparency\n    if (material) material.depthWrite = true;\n  });\n};\n\nconst SkinnedMeshType = 'SkinnedMesh';\nexport const isSkinnedMesh = (node: Object3D) => {\n  return node.type === SkinnedMeshType;\n};\n","import { Vector2 } from 'three';\nimport { useEffect } from 'react';\nimport { lerp, mapRange, Nodes } from './utils';\nimport { useFrame, useThree } from '@react-three/fiber';\n\nconst rad = Math.PI / 180;\nconst eyeRotationOffsetX = 90 * rad;\n\nlet reset: boolean = false;\nlet timeout: NodeJS.Timeout;\n\nconst targetPos = new Vector2(0, 0);\nconst currentPos = new Vector2(0, 0);\n\nconst setResetTrue = () => {\n  timeout = setTimeout(() => {\n    reset = true;\n  }, 1000);\n};\n\nconst setResetFalse = () => {\n  clearTimeout(timeout);\n  reset = false;\n};\n\nexport default function useHeadMovement(\n  enabled: boolean | undefined,\n  nodes: Nodes\n) {\n  const { gl } = useThree();\n\n  useEffect(() => {\n    if (!enabled) return;\n\n    gl.domElement.addEventListener('mouseleave', setResetTrue);\n    gl.domElement.addEventListener('mouseenter', setResetFalse);\n\n    return () => {\n      gl.domElement.removeEventListener('mouseleave', setResetTrue);\n      gl.domElement.removeEventListener('mouseenter', setResetFalse);\n    };\n  }, [gl.domElement, enabled]);\n\n  useFrame(state => {\n    if (!enabled) return;\n\n    const cameraRotation = Math.abs(state.camera.rotation.z);\n\n    if (!reset && cameraRotation < 0.2) {\n      targetPos.x = mapRange(state.mouse.y, -1, 1, 5 * rad, -5 * rad);\n      targetPos.y = mapRange(state.mouse.x, -1, 1, -10 * rad, 10 * rad);\n    } else {\n      targetPos.set(0, 0);\n    }\n\n    currentPos.x = lerp(currentPos.x, targetPos.x);\n    currentPos.y = lerp(currentPos.y, targetPos.y);\n\n    nodes.Neck.rotation.x = currentPos.x + 0.1;\n    nodes.Neck.rotation.y = currentPos.y;\n\n    nodes.Head.rotation.x = currentPos.x * 2;\n    nodes.Head.rotation.y = currentPos.y * 2;\n\n    nodes.RightEye.rotation.x = currentPos.x - eyeRotationOffsetX;\n    nodes.LeftEye.rotation.x = currentPos.x - eyeRotationOffsetX;\n\n    nodes.RightEye.rotation.z = currentPos.y * 3 + Math.PI;\n    nodes.LeftEye.rotation.z = currentPos.y * 3 + Math.PI;\n  });\n}\n","import React, { useEffect } from 'react';\nimport { Object3D, Vector3 } from 'three';\nimport { useGLTF } from '@react-three/drei';\nimport useEyeBlink from '../utils/useEyeBlink';\nimport useHeadMovement from '../utils/useHeadMovement';\nimport { dispose, useGraph } from '@react-three/fiber';\nimport { correctMaterials, hideHands, isSkinnedMesh } from '../utils/utils';\n\ninterface AvatarProps {\n  url: string;\n  eyeBlink?: boolean;\n  headMovement?: boolean;\n  onLoaded?: () => void;\n}\n\nconst position = new Vector3(0, -0.6, 0);\n\nexport default function Avatar({\n  url,\n  eyeBlink,\n  headMovement,\n  onLoaded,\n}: AvatarProps) {\n  const { scene } = useGLTF(url);\n  const { nodes, materials } = useGraph(scene);\n\n  useEyeBlink(eyeBlink, nodes);\n  useHeadMovement(headMovement, nodes);\n\n  useEffect(() => {\n    hideHands(nodes);\n    correctMaterials(materials);\n\n    if (onLoaded) onLoaded();\n\n    return () => {\n      Object.values(materials).forEach(dispose);\n\n      Object.values(nodes)\n        .filter(isSkinnedMesh)\n        .forEach(dispose);\n    };\n  }, [materials, nodes, url, onLoaded]);\n\n  return (\n    <group position={position}>\n      <primitive key=\"armature\" object={nodes.Hips} />\n      {Object.values(nodes)\n        .filter(isSkinnedMesh)\n        .map((node: Object3D) => (\n          <primitive key={node.name} object={node} receiveShadow castShadow />\n        ))}\n    </group>\n  );\n}\n","import React from 'react';\nimport { Html, useProgress } from '@react-three/drei';\n\nconst Loader = () => {\n  const { progress } = useProgress();\n  return <Html center>{progress} % loaded</Html>;\n};\n\nexport default Loader;\n","import type { CSSProperties, ReactNode } from 'react';\nimport type { PresetsType } from '@react-three/drei/helpers/environment-assets';\nimport React, { Suspense } from 'react';\nimport Avatar from './components/avatar';\nimport Loader from './components/loader';\nimport { Canvas } from '@react-three/fiber';\nimport {\n  Environment,\n  OrbitControls,\n} from '@react-three/drei';\n\ninterface AvatarViewProps {\n  url: string;\n  eyeBlink?: boolean;\n  headMovement?: boolean;\n  rotateAvatar?: boolean;\n  style?: CSSProperties;\n  environment?: PresetsType;\n  fallback?: ReactNode;\n}\n\nconst defaultStyle = {\n  width: '250px',\n  height: '250px',\n  backgroundColor: 'orange',\n  borderRadius: '100%',\n};\n\nexport { Loader };\n\nexport default function AvatarView({\n  url,\n  style,\n  rotateAvatar,\n  eyeBlink,\n  headMovement,\n  environment = 'sunset',\n  fallback = <Loader />,\n}: AvatarViewProps) {\n  return (\n    <Canvas\n      style={style || defaultStyle}\n      camera={{ fov: 40, position: [0, 0, 0.6] }}\n    >\n      <Suspense fallback={fallback || null}>\n        {environment && <Environment preset={environment} />}\n        {rotateAvatar && <OrbitControls enablePan={false} enableZoom={false} />}\n        <Avatar url={url} eyeBlink={eyeBlink} headMovement={headMovement} />\n      </Suspense>\n    </Canvas>\n  );\n}\n"],"names":["blinkTime","timeout","headMesh","morphIndex","setNextBlink","setTimeout","Math","random","useEyeBlink","enabled","nodes","useEffect","Wolf3D_Head","Wolf3D_Avatar","material","morphTargets","morphTargetDictionary","morphTargetInfluences","eyesClosed","clearTimeout","useFrame","_","delta","value","abs","sin","PI","clamp","min","max","lerp","start","end","time","mapRange","inMin","inMax","outMin","outMax","hideHands","Wolf3D_Hands","visible","RightHand","LeftHand","position","set","correctMaterials","materials","Object","values","forEach","map","minFilter","LinearFilter","depthWrite","SkinnedMeshType","isSkinnedMesh","node","type","rad","eyeRotationOffsetX","reset","targetPos","Vector2","currentPos","setResetTrue","setResetFalse","useHeadMovement","useThree","gl","domElement","addEventListener","removeEventListener","state","cameraRotation","camera","rotation","z","x","mouse","y","Neck","Head","RightEye","LeftEye","Vector3","Avatar","url","eyeBlink","headMovement","onLoaded","useGLTF","scene","useGraph","dispose","filter","React","key","object","Hips","name","receiveShadow","castShadow","Loader","useProgress","progress","Html","center","defaultStyle","width","height","backgroundColor","borderRadius","AvatarView","style","rotateAvatar","environment","fallback","Canvas","fov","Suspense","Environment","preset","OrbitControls","enablePan","enableZoom"],"mappings":"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"}